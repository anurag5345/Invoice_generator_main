<div class="wrapper" *ngIf="invoice">
  <div class="title-row">
    <h1>Invoice #{{ invoice.invoiceNumber }}</h1>
  </div>

  <div class="info">
    <div><strong>Customer:</strong> {{ invoice.customerName }}</div>
    <div><strong>Issue Date:</strong> {{ invoice.issueDate | date }}</div>
    <div><strong>Phone:</strong> {{ invoice.phoneNumber || "N/A" }}</div>
    <div><strong>Due:</strong> {{ invoice.dueDate | date }}</div>
  </div>

  <h2 class="section-title">Items</h2>
  <div class="table-responsive">
    <table class="table-items">
      <thead>
        <tr>
          <th>Description</th>
          <th>Rate</th>
          <th>Unit</th>
          <th>GST %</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let it of invoice.items">
          <td data-label="Description">{{ it.description }}</td>
          <td data-label="Rate">{{ it.rate }}</td>
          <td data-label="Unit">{{ it.unitPrice | number : "1.2-2" }}</td>
          <td data-label="GST %">{{ it.gstRate || 0 }}</td>
          <td data-label="Amount">
            {{ it.rate * it.unitPrice | number : "1.2-2" }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="totals">
    <div>Subtotal: {{ invoice.totalWithoutGST || 0 | number : "1.2-2" }}</div>
    <div>GST: {{ invoice.totalGST || 0 | number : "1.2-2" }}</div>
    <div>Total: {{ invoice.totalWithGST || 0 | number : "1.2-2" }}</div>
  </div>

  <div class="actions">
    <a class="btn" mat-button routerLink="/invoices">Back</a>
    <button
      class="btn"
      mat-raised-button
      color="primary"
      (click)="downloadPdf()"
    >
      Download PDF
    </button>
  </div>
</div>
